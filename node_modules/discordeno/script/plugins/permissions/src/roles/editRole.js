"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.editRole = void 0;
const permissions_js_1 = require("../permissions.js");
function editRole(bot) {
    const editRole = bot.helpers.editRole;
    bot.helpers.editRole = async function (guildId, id, options) {
        const guild = bot.guilds.get(bot.transformers.snowflake(guildId));
        if (guild) {
            const role = guild.roles.get(bot.transformers.snowflake(id));
            if (role) {
                const botRole = (0, permissions_js_1.highestRole)(bot, guild, bot.id);
                if (!(0, permissions_js_1.higherRolePosition)(bot, guild, botRole.id, role.id)) {
                    throw new Error(`The bot can not add this role to the member because it does not have a role higher than the role ID: ${role.id}.`);
                }
            }
            (0, permissions_js_1.requireBotGuildPermissions)(bot, guild, ["MANAGE_ROLES"]);
        }
        if (options.name && !bot.utils.validateLength(options.name, { max: 100 })) {
            throw new Error("Role name must be less than 100 characters");
        }
        return await editRole(guildId, id, options);
    };
}
exports.editRole = editRole;
