import { stringCamelCase, bnToBn, BN } from '@polkadot/util';
import { ContractPromise, CodePromise } from '@polkadot/api-contract';
import { HttpProvider, WsProvider, ApiPromise } from '@polkadot/api';
import { createContext, useContext, useState, useEffect } from 'react';
import { jsx } from 'react/jsx-runtime';

var bt=Object.defineProperty,xt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var St=Object.prototype.hasOwnProperty,kt=Object.prototype.propertyIsEnumerable;var _=(e,r,t)=>r in e?bt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,E=(e,r)=>{for(var t in r||(r={}))St.call(r,t)&&_(e,t,r[t]);if(Y)for(var t of Y(r))kt.call(r,t)&&_(e,t,r[t]);return e},H=(e,r)=>xt(e,Ct(r));var m=(e,r,t)=>new Promise((o,n)=>{var s=f=>{try{u(t.next(f));}catch(w){n(w);}},p=f=>{try{u(t.throw(f));}catch(w){n(w);}},u=f=>f.done?o(f.value):Promise.resolve(f.value).then(s,p);u((t=t.apply(e,r)).next());});var yt={network:"development",name:"Local Development",ss58Prefix:42,rpcUrls:["ws://127.0.0.1:9944"],explorerUrls:["https://polkadot.js.org/apps/#/explorer?rpc=ws://127.0.0.1:9944"],testnet:!0,faucetUrls:["https://polkadot.js.org/apps/#/accounts?rpc=ws://127.0.0.1:9944"]},Pt={network:"alephzero-testnet",name:"Aleph Zero Testnet",ss58Prefix:42,rpcUrls:["wss://ws.test.azero.dev"],explorerUrls:["https://azero.dev/?rpc=wss%3A%2F%2Fws.test.azero.dev"],testnet:!0,faucetUrls:["https://faucet.test.azero.dev"]},At={network:"rococo",name:"Rococo",rpcUrls:["wss://rococo-rpc.polkadot.io"],testnet:!0,faucetUrls:["https://matrix.to/#/#rococo-faucet:matrix.org"],explorerUrls:["https://rococo.subscan.io"]},vt={network:"astar",name:"Astar",ss58Prefix:5,rpcUrls:["wss://astar-rpc.dwellir.com"],faucetUrls:[],explorerUrls:["https://astar.subscan.io"]},Et={network:"shiden",name:"Shiden",ss58Prefix:5,rpcUrls:["wss://shiden-rpc.dwellir.com"],explorerUrls:["https://shiden.subscan.io"]},It={network:"shibuya",name:"Shibuya Testnet",testnet:!0,ss58Prefix:5,rpcUrls:["wss://shibuya-rpc.dwellir.com"],faucetUrls:["https://portal.astar.network/#/shibuya-testnet/assets"],explorerUrls:["https://shibuya.subscan.io"]},Ut=[yt,Pt,At,vt,Et,It],$=e=>Ut.find(r=>r.network.toLowerCase()===(e||"").toLowerCase());var j=(e,r)=>((e==null?void 0:e.address)||"").toLowerCase()===((r==null?void 0:r.address)||"").toLowerCase(),tt=(e,r)=>e.length!==r.length?!1:e.every((t,o)=>j(t,r[o]));var M=(e,r)=>{let t=e.abi.messages.find(o=>stringCamelCase(o.method)===stringCamelCase(r));if(!t)throw new Error(`"${r}" not found in Contract`);return t};function rt(e){return typeof e=="object"&&e!==null&&"Err"in e}function ot(e){return typeof e=="object"&&e!==null&&"Ok"in e}function Ot(e){return (e==null?void 0:e.lookupName)||(e==null?void 0:e.type)||""}function K({result:e},r,t){var p,u,f,w;let o,n="",s=!0;if(e.isOk){s=e.asOk.flags.toHuman().includes("Revert");let i=M(r,t).returnType,g=Ot(i),a=r.abi.registry,c=i?a.createTypeUnsafe(g,[e.asOk.data]).toHuman():"()";o=ot(c)?c.Ok:rt(c)?c.Err:c;let U=rt(o)?typeof o.Err=="object"?JSON.stringify(o.Err,null,2):(u=(p=o.Err)==null?void 0:p.toString())!=null?u:"Error":o!=="Ok"&&(o==null?void 0:o.toString())||"Error",k=ot(c)?typeof o=="object"?JSON.stringify(o,null,"	"):(f=o==null?void 0:o.toString())!=null?f:"()":(w=JSON.stringify(o,null,"	"))!=null?w:"()";n=s?U:k;}return {output:o,decodedOutput:n,isError:s}}var Bt=(e,r,t)=>{let o=bnToBn(r),n=bnToBn(t);return e.registry.createType("WeightV2",{refTime:o,proofSize:n})},z=(e,r=.8)=>{var p,u;let t=e.consts.system.blockWeights.toPrimitive(),o=(u=(p=t==null?void 0:t.perClass)==null?void 0:p.normal)==null?void 0:u.maxExtrinsic,n=o!=null&&o.refTime?bnToBn(o.refTime).mul(new BN(r*100)).div(new BN(100)):new BN(0),s=o!=null&&o.proofSize?bnToBn(o.proofSize).mul(new BN(r*100)).div(new BN(100)):new BN(0);return Bt(e,n,s)};var Tt=(p,u,f,w,...I)=>m(void 0,[p,u,f,w,...I],function*(e,r,t,o,n={},s=[]){let h=M(t,o),i=(r==null?void 0:r.address)||r,{value:g,gasLimit:a,storageDepositLimit:c}=n;return yield e.call.contractsApi.call(i,t.address,g!=null?g:new BN(0),a!=null?a:null,c!=null?c:null,h.toU8a(s))}),fe=(p,u,f,w,...I)=>m(void 0,[p,u,f,w,...I],function*(e,r,t,o,n={},s=[]){let h=z(e),i=t.query[stringCamelCase(o)];return yield i(r,H(E({},n),{gasLimit:h}),...s)}),ge=(u,f,w,I,...h)=>m(void 0,[u,f,w,I,...h],function*(e,r,t,o,n={},s=[],p){delete n.gasLimit;let i=yield Tt(e,r,t,o,n,s),{isError:g,decodedOutput:a}=K(i,t,o);if(g)return Promise.reject({dryResult:i,errorMessage:a||"Error"});let c=i.gasRequired;return new Promise((U,k)=>m(void 0,null,function*(){let B=t.tx[stringCamelCase(o)](H(E({},n),{gasLimit:c}),...s);try{let b=yield B.signAndSend(r,l=>{var v;p==null||p(l);let A=(v=l==null?void 0:l.status)==null?void 0:v.isInBlock;if(!A)return;let O=l==null?void 0:l.events.find(({event:{method:D}})=>D==="ExtrinsicFailed");A&&O?(k({dryResult:i,errorMessage:K||"ExtrinsicFailed",errorEvent:O}),b==null||b()):A&&(U({dryResult:i,result:l}),b==null||b());});}catch(b){k({errorMessage:"UserCancelled"});}}))});var Se=(u,f,w,I,...h)=>m(void 0,[u,f,w,I,...h],function*(e,r,t,o,n="new",s=[],p={}){return new Promise((i,g)=>m(void 0,null,function*(){let a=new CodePromise(e,t,o),c=z(e),U=a.tx[stringCamelCase(n)],k=yield U(E({gasLimit:c},p),...s).signAndSend(r,({events:B,contract:b,status:l})=>{var A,O;if(l!=null&&l.isInBlock){k==null||k();let v=B.find(({event:{method:y}})=>y==="ExtrinsicFailed");if(v||!(b!=null&&b.address))return console.error(`Contract '${t==null?void 0:t.contract.name}' could not be deployed`,(O=(A=v==null?void 0:v.event)==null?void 0:A.data)==null?void 0:O.toHuman()),g();let D=t==null?void 0:t.source.hash,W=b.address.toString();return console.log(`Contract '${t==null?void 0:t.contract.name}' deployed at ${W}`),i({address:W,hash:D})}});}))});var Ae=(e,r,t=2)=>(e.div(new BN(10).pow(new BN(r-t-1))).toNumber()/10**(t+1)).toLocaleString(void 0,{maximumFractionDigits:t}),st=(e,r,t=2)=>(e.div(new BN(10).pow(new BN(r-t-1))).toNumber()/10**(t+1)).toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t});var it=(e,r,t=2)=>m(void 0,null,function*(){var I,h,i,g;let o=((I=e.registry.chainDecimals)==null?void 0:I[0])||12,n=((h=e.registry.chainTokens)==null?void 0:h[0])||"Unit",s=yield e.query.system.account(r),p=new BN(((i=s==null?void 0:s.data)==null?void 0:i.free)||0),u=new BN(((g=s==null?void 0:s.data)==null?void 0:g.reserved)||0),f=u.add(p),w=st(f,o,t);return {freeBalance:p,reservedBalance:u,balance:f,balanceFormatted:w,tokenSymbol:n,tokenDecimals:o}});var ct=(e,r)=>m(void 0,null,function*(){let t=e.rpcUrls[0];if(!t)throw new Error("Given chain has no RPC url defined");let o=t.startsWith("http")?new HttpProvider(t):new WsProvider(t);return {api:yield ApiPromise.create(E({provider:o},r)),provider:o}});var Ne=e=>{let{result:r,output:t}=e;if(!(r!=null&&r.isOk)||!t)throw new Error(`Error while unwrapping: ${r.toString()}`);return t.toPrimitive().ok},Re=(e,r)=>{let{result:t,output:o}=e,n=r;return t!=null&&t.isOk&&o&&(n=o.toPrimitive().ok),n};var zt=(e,r)=>{e(t=>{let o=t.findIndex(({contractId:n,networkId:s})=>n.toLowerCase()===r.contractId.toLowerCase()&&s.toLowerCase()===r.networkId.toLowerCase());return o>=0&&t.splice(o,1),[...t,r]});},lt=(e,r)=>m(void 0,null,function*(){(yield r).forEach(t=>zt(e,t));}),G=(e,r,t)=>e.find(o=>o.contractId.toLowerCase()===r.toLowerCase()&&o.networkId.toLowerCase()===(t||"").toLowerCase()),Ze=(e,r,t,o)=>{if(!e)return;let n=G(r||[],t,o);if(n)return new ContractPromise(e,n==null?void 0:n.abi,n==null?void 0:n.address)};var qt=(o=>(o[o.InitializationError=0]="InitializationError",o[o.NoSubstrateExtensionDetected=1]="NoSubstrateExtensionDetected",o[o.NoAccountInjected=2]="NoAccountInjected",o))(qt||{}),mt=createContext(null),N=()=>{let e=useContext(mt);if(!e)throw new Error("useInkathon must be used within a UseInkathonProvider");return e},mr=({children:e,appName:r,defaultChain:t,connectOnInit:o,deployments:n,apiOptions:s})=>{if(!t||typeof t=="string"&&$(t)===void 0)throw new Error("None or invalid `defaultChain` provided with `UseInkathonProvider`. Forgot to set environment variable?");let[p,u]=useState(o),[f,w]=useState(!1),[I,h]=useState(),[i,g]=useState(typeof t=="string"?$(t):t),[a,c]=useState(),[U,k]=useState(),[B,b]=useState([]),[l,A]=useState(),[O,v]=useState(),[D,W]=useState(),[y,V]=useState(),[ut,dt]=useState([]);useEffect(()=>{n&&lt(dt,n);},[]);let Q=C=>m(void 0,null,function*(){w(!1),h(void 0);try{let d=C||i,{api:x,provider:P}=yield ct(d,E({noInitWarn:!0,throwOnConnect:!0},s));k(P),c(x),i.network!==d.network&&g(d);}catch(d){let x="Error while initializing polkadot.js api";console.error(x,d),h({code:0,message:x}),u(!1),c(void 0),k(void 0);}}),ft=()=>m(void 0,null,function*(){var C;if(yield a==null?void 0:a.isReadyOrError,!((C=l==null?void 0:l.meta)!=null&&C.source)||!a){W(void 0),a==null||a.setSigner(void 0);return}try{let{web3FromSource:d}=yield import('@polkadot/extension-dapp'),x=yield d(l.meta.source),P=x==null?void 0:x.signer;W(P),a.setSigner(P);}catch(d){console.error("Error while setting signer:",d),W(void 0),a.setSigner(void 0);}});useEffect(()=>{ft();},[a,l]);let Z=C=>{let d=C||[],x=d.find(P=>j(P,O))||(d==null?void 0:d[0]);tt(B,d)||b(()=>d),j(l,x)||A(()=>x),w(!!x);};useEffect(()=>{l&&!j(l,O)&&v(()=>l);},[l]);let q=C=>m(void 0,null,function*(){h(void 0),u(!0),w(!1),(!(a!=null&&a.isConnected)||C&&C.network!==i.network)&&(yield Q(C));try{let{web3AccountsSubscribe:d,web3Enable:x}=yield import('@polkadot/extension-dapp'),P=yield x(r);if(!(P!=null&&P.length)){let X="No Substrate-compatible extension detected";throw h({code:1,message:X}),new Error(X)}y==null||y();let ht=yield d(Z);V(ht);}catch(d){console.error("Error while connecting wallet:",d);}finally{u(!1);}}),gt=()=>m(void 0,null,function*(){yield a==null?void 0:a.disconnect(),w(!1),u(!1),Z([]),y==null||y(),V(void 0);});useEffect(()=>(o?q():Q(),()=>{y==null||y();}),[]);let wt=C=>m(void 0,null,function*(){yield q(C);});return jsx(mt.Provider,{value:{isConnecting:p,isConnected:f,error:I,activeChain:i,switchActiveChain:wt,api:a,provider:U,connect:q,disconnect:gt,accounts:B,activeAccount:l,activeSigner:D,setActiveAccount:A,deployments:ut},children:e})};var hr=(e,r=2)=>{let{api:t}=N(),[o,n]=useState(),[s,p]=useState(),[u,f]=useState(),[w,I]=useState(),[h,i]=useState(),[g,a]=useState();return useEffect(()=>{m(void 0,null,function*(){if(!t||!e){n(void 0),p(void 0),f(void 0),I(void 0),i(void 0),a(void 0);return}let c=yield it(t,e,r);n(c.freeBalance),p(c.reservedBalance),f(c.balance),I(`${c.balanceFormatted} ${c.tokenSymbol}`),i(c.tokenSymbol),a(c.tokenDecimals);});},[t,e,r]),{freeBalance:o,reservedBalance:s,balance:u,balanceFormatted:w,tokenSymbol:h,tokenDecimals:g}};var pt=(e,r)=>{let{api:t,isConnecting:o}=N(),[n,s]=useState(),p=()=>m(void 0,null,function*(){if(o||!t||!e||!r){s(void 0);return}let u=new ContractPromise(t,e,r);s(u);});return useEffect(()=>{p();},[t,o,e,r]),{contract:n,address:r}};var Ur=(e,r)=>{let{deployments:t,activeChain:o}=N();r=r||(o==null?void 0:o.network)||"";let n=G(t||[],e,r);return pt(n==null?void 0:n.abi,n==null?void 0:n.address)};var Qt=(o=>(o.Browser="browser",o.Android="android",o.iOS="ios",o))(Qt||{}),Zt={id:"polkadot-js",name:"Polkadot{.js}",platforms:["browser"],urls:{website:"https://polkadot.js.org/extension/",chromeExtension:"https://chrome.google.com/webstore/detail/polkadot%7Bjs%7D-extension/mopnmbcafieddcagagdcbnhejhlodfdd",firefoxExtension:"https://addons.mozilla.org/en-US/firefox/addon/polkadot-js-extension/"},logoUrls:["https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/polkadot@128w.png","https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/polkadot@512w.png"]},Xt={id:"subwallet",name:"SubWallet",platforms:["browser"],urls:{website:"https://subwallet.app/",chromeExtension:"https://chrome.google.com/webstore/detail/subwallet-polkadot-extens/onhogfjeacnfoofkfgppdlbmlmnplgbn",firefoxExtension:"https://addons.mozilla.org/en-US/firefox/addon/subwallet/"},logoUrls:["https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/subwallet@128w.png","https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/subwallet@512w.png"]},Yt={id:"talisman",name:"Talisman",platforms:["browser"],urls:{website:"https://www.talisman.xyz/",chromeExtension:"https://chrome.google.com/webstore/detail/talisman-polkadot-wallet/fijngjgcjhjmmpcmkeiomlglpeiijkld",firefoxExtension:"https://addons.mozilla.org/en-US/firefox/addon/talisman-wallet-extension/"},logoUrls:["https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/talisman@128w.png","https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/talisman@512w.png"]},_t={id:"nova",name:"Nova Wallet",platforms:["android","ios"],urls:{website:"https://novawallet.io/",androidApp:"https://play.google.com/store/apps/details?id=io.novafoundation.nova.market",iosApp:"https://apps.apple.com/app/nova-polkadot-kusama-wallet/id1597119355"},logoUrls:["https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/nova@128w.png","https://github.com/scio-labs/use-inkathon/raw/main/assets/wallet-logos/nova@512w.png"]},te=[Zt,Xt,Yt,_t],Rr=e=>te.find(r=>r.id.toLowerCase()===e.toLowerCase());

export { Qt as SubstrateWalletPlatform, qt as UseInkathonErrorCode, mr as UseInkathonProvider, mt as UseInkathonProviderContext, tt as accountArraysAreEqual, j as accountsAreEqual, Pt as alephzeroTestnet, Ut as allSubstrateChains, te as allSubstrateWallets, vt as astar, Tt as contractCallDryRun, fe as contractQuery, ge as contractTx, K as decodeOutput, Se as deployContract, yt as development, Ae as formatBalance, st as formatBalanceToFixed, M as getAbiMessage, it as getBalance, G as getDeployment, Ze as getDeploymentContract, Bt as getGasLimit, z as getMaxGasLimit, $ as getSubstrateChain, Rr as getSubstrateWallet, ct as initPolkadotJs, _t as nova, Zt as polkadotjs, zt as registerDeployment, lt as registerDeployments, At as rococo, It as shibuya, Et as shiden, Xt as subwallet, Yt as talisman, Re as unwrapResultOrDefault, Ne as unwrapResultOrError, hr as useBalance, pt as useContract, N as useInkathon, Ur as useRegisteredContract };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=index.js.map